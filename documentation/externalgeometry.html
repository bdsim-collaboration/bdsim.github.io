<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>External Geometry Formats &mdash; BDSIM 1.7.7.develop documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="_static/graphviz.css?v=fd3f3429" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=106dc6df"></script>
        <script src="_static/doctools.js?v=9a2dae69"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Output" href="output.html" />
    <link rel="prev" title="Model Conversion" href="model_conversion.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            BDSIM
              <img src="_static/bdsim-logo-small.jpg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                1.7.7.develop
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">User Guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="licence.html">Licence &amp; Disclaimer</a></li>
<li class="toctree-l1"><a class="reference internal" href="authorship.html">Authorship</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="running.html">Running BDSIM</a></li>
<li class="toctree-l1"><a class="reference internal" href="input_syntax.html">Input Syntax</a></li>
<li class="toctree-l1"><a class="reference internal" href="model_construction.html">Model Construction</a></li>
<li class="toctree-l1"><a class="reference internal" href="model_control.html">Model Control</a></li>
<li class="toctree-l1"><a class="reference internal" href="model_customisation.html">Model Customisation</a></li>
<li class="toctree-l1"><a class="reference internal" href="model_conversion.html">Model Conversion</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">External Geometry Formats</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#gdml">GDML</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#gdml-preparation">GDML Preparation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#gdml-colours">GDML Colours</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#mokka">Mokka</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#describing-the-geometry">Describing the geometry</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#common-table-parameters">Common Table Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#box-solid-types">‘Box’ Solid Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="#trapezoid-solid-types">’Trapezoid’ Solid Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="#cone-solid-types">’Cone’ Solid Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="#torus-solid-types">’Torus’ Solid Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="#polycone-solid-types">’Polycone’ Solid Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="#elliptical-cone-solid-types">’Elliptical Cone’ Solid Types</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#creating-a-geometry-list">Creating a geometry list</a></li>
<li class="toctree-l3"><a class="reference internal" href="#defining-a-mokka-element">Defining a Mokka element</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="output.html">Output</a></li>
<li class="toctree-l1"><a class="reference internal" href="output_analysis.html">Output Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="python_utilities.html">Python Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="visualisation.html">Visualisation</a></li>
<li class="toctree-l1"><a class="reference internal" href="interfacing.html">Interfacing</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples &amp; Tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="support.html">Support</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="history.html">Version History</a></li>
<li class="toctree-l1"><a class="reference internal" href="developer.html">Developer Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="model_description.html">Model Description</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">BDSIM</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">External Geometry Formats</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/externalgeometry.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="external-geometry-formats">
<span id="id1"></span><h1>External Geometry Formats<a class="headerlink" href="#external-geometry-formats" title="Link to this heading"></a></h1>
<p>Currently, three formats are supported by BDSIM. GDML is recommended as this is thoroughly
supported by Geant4 and the geometry extent can be automatically determined.</p>
<p>More can be added in collaboration with the BDSIM development team - please see <a class="reference internal" href="support.html#feature-request"><span class="std std-ref">Feature Request</span></a>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The Mokka format is not currently developed or maintained in BDSIM.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The GGMAD format has been deprecated and removed from BDSIM as of V1.7.0 as
it was not maintained and was very hard to maintain as it was old code.</p>
</div>
<section id="gdml">
<h2>GDML<a class="headerlink" href="#gdml" title="Link to this heading"></a></h2>
<p>GDML (Geometry Description Markup Language) is an XML schema for detector description.
To use Geant4 and BDSIM needs to be built with GDML usage on (default true). For more
information please refer to the GDML <a class="reference external" href="http://gdml.web.cern.ch/GDML/">website</a> and
<a class="reference external" href="http://gdml.web.cern.ch/GDML/doc/GDMLmanual.pdf">manual</a>.</p>
<p>This format is widely supported and other geometry software may be able to export
geometry in GDML format.</p>
<p>See <a class="reference internal" href="model_customisation.html#geometry-gdml-preprocessing"><span class="std std-ref">GDML Preprocessing</span></a> for a relevant discussion about how BDSIM
handles GDML files.</p>
<section id="gdml-preparation">
<h3>GDML Preparation<a class="headerlink" href="#gdml-preparation" title="Link to this heading"></a></h3>
<p>A Python package <strong>pyg4ometry</strong> has been created to aid preparation, visualisation and
overlap checking of GDML geometry. Please see <a class="reference internal" href="python_utilities.html#python-geometry-preparation"><span class="std std-ref">Geometry Preparation</span></a> for more details.</p>
<p>This package is used for many of the examples included with BDSIM and the Python scripts are
included with the examples.</p>
</section>
<section id="gdml-colours">
<h3>GDML Colours<a class="headerlink" href="#gdml-colours" title="Link to this heading"></a></h3>
<p>BDSIM can read auxiliary information tags in GDML attached to logical volumes. The following
information is optionally interpreted if available in the <code class="code docutils literal notranslate"><span class="pre">&lt;volume&gt;</span></code> tag:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">auxiliary</span> <span class="n">auxtype</span><span class="o">=</span><span class="s2">&quot;colour&quot;</span> <span class="n">auxvalue</span><span class="o">=</span><span class="s2">&quot;0.39215686274509803 0.5490196078431373 0.596078431372549 1&quot;</span><span class="o">/&gt;</span>
</pre></div>
</div>
<p>The <code class="code docutils literal notranslate"><span class="pre">auxvalue</span></code> should be a white-space separated list of 4 values from 0 to 1 for
RGBA values.</p>
<p>An example can be found in <code class="code docutils literal notranslate"><span class="pre">examples/features/geometry/9_gdml/14_gdml_colours.gmad</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is not a Geant4 standard and is custom information the user must supply in their
GDML file and therefore it is only convention we agree on for the tag and the contents.</p>
</div>
</section>
</section>
<section id="mokka">
<h2>Mokka<a class="headerlink" href="#mokka" title="Link to this heading"></a></h2>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The Mokka format is not currently developed or maintained in BDSIM.</p>
</div>
<p>This format is currently in the form of a dumped MySQL database format. Note that throughout
any of the Mokka files, a <cite>#</cite> may be used to represent a commented line. There are three key
stages, which are detailed in the following sections, that are required for setting up the
Mokka geometry:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#mokka-description"><span class="std std-ref">Describing the geometry</span></a></p></li>
<li><p><a class="reference internal" href="#mokka-list"><span class="std std-ref">Creating a geometry list</span></a></p></li>
<li><p><a class="reference internal" href="#mokka-element"><span class="std std-ref">Defining a Mokka element</span></a></p></li>
</ul>
<section id="describing-the-geometry">
<span id="mokka-description"></span><h3>Describing the geometry<a class="headerlink" href="#describing-the-geometry" title="Link to this heading"></a></h3>
<p>An object must be described by creating a MySQL file containing commands that would typically
be used for uploading/creating a database and a corresponding new table into a MySQL database.
BDSIM supports only a few such commands - specifically the CREATE TABLE and INSERT INTO commands.
When writing a table to describe a solid, there are some parameters that are common to all solid
types (such as NAME and MATERIAL) and some that are more specific (such as those relating to radii
for cone objects). A full list of the standard and specific table parameters, as well as some
basic examples, are given below with each solid type. All files containing geometry descriptions
must have the following database creation commands at the top of the file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">DROP</span> <span class="n">DATABASE</span> <span class="n">IF</span> <span class="n">EXISTS</span> <span class="n">DATABASE_NAME</span><span class="p">;</span>
<span class="n">CREATE</span> <span class="n">DATABASE</span> <span class="n">DATABASE_NAME</span><span class="p">;</span>
<span class="n">USE</span> <span class="n">DATABASE_NAME</span><span class="p">;</span>
</pre></div>
</div>
<p>A table must be created to allow for the insertion of the geometry descriptions. A table is
created using the following  MySQL compliant commands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CREATE</span> <span class="n">TABLE</span> <span class="n">TABLE</span><span class="o">-</span><span class="n">NAME_GEOMETRY</span><span class="o">-</span><span class="n">TYPE</span> <span class="p">(</span>
<span class="n">TABLE</span><span class="o">-</span><span class="n">PARAMETER</span> <span class="n">VARIABLE</span><span class="o">-</span><span class="n">TYPE</span><span class="p">,</span>
<span class="n">TABLE</span><span class="o">-</span><span class="n">PARAMETER</span> <span class="n">VARIABLE</span><span class="o">-</span><span class="n">TYPE</span><span class="p">,</span>
<span class="n">TABLE</span><span class="o">-</span><span class="n">PARAMETER</span> <span class="n">VARIABLE</span><span class="o">-</span><span class="n">TYPE</span>
<span class="p">);</span>
</pre></div>
</div>
<p>Once a table has been created, values must be entered into it in order to define the solids and
position them. The insertion command must appear after the table creation and must be followed
by the MySQL compliant table insertion command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">TABLE</span><span class="o">-</span><span class="n">NAME_GEOMETRY</span><span class="o">-</span><span class="n">TYPE</span> <span class="n">VALUES</span><span class="p">(</span><span class="n">value1</span><span class="p">,</span> <span class="n">value2</span><span class="p">,</span> <span class="s2">&quot;char-value&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">);</span>
</pre></div>
</div>
<p>The values must be inserted in the same order, as their corresponding parameter types are described
in the table creation. Note that ALL length types must be specified in mm and that ALL angles
must be in radians.</p>
<p>An example of two simple boxes with no visual attribute set is shown below. The first box is a
simple vacuum cube, whilst the second is an iron box with length x = 10mm, length y = 150mm,
length z = 50mm, positioned at x=1m, y=0, z=0.5m and with zero rotation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CREATE</span> <span class="n">TABLE</span> <span class="n">mytable_BOX</span> <span class="p">(</span>
<span class="n">NAME</span> <span class="n">VARCHAR</span><span class="p">(</span><span class="mi">32</span><span class="p">),</span>
<span class="n">MATERIAL</span> <span class="n">VARCHAR</span><span class="p">(</span><span class="mi">32</span><span class="p">),</span>
<span class="n">LENGTHX</span> <span class="n">DOUBLE</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span>
<span class="n">LENGTHY</span> <span class="n">DOUBLE</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span>
<span class="n">LENGTHZ</span> <span class="n">DOUBLE</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span>
<span class="n">POSX</span> <span class="n">DOUBLE</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span>
<span class="n">POSY</span> <span class="n">DOUBLE</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span>
<span class="n">POSZ</span> <span class="n">DOUBLE</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span>
<span class="n">ROTPSI</span> <span class="n">DOUBLE</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span>
<span class="n">ROTTHETA</span> <span class="n">DOUBLE</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span>
<span class="n">ROTPHI</span> <span class="n">DOUBLE</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="p">);</span>

<span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">mytable_BOX</span> <span class="n">VALUES</span><span class="p">(</span><span class="s2">&quot;a_box&quot;</span><span class="p">,</span><span class="s2">&quot;vacuum&quot;</span><span class="p">,</span> <span class="mf">50.0</span><span class="p">,</span> <span class="mf">50.0</span><span class="p">,</span> <span class="mf">50.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">);</span>
<span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">mytable_BOX</span> <span class="n">VALUES</span><span class="p">(</span><span class="s2">&quot;another_box&quot;</span><span class="p">,</span><span class="s2">&quot;iron&quot;</span><span class="p">,</span> <span class="mf">10.0</span><span class="p">,</span> <span class="mf">150.0</span><span class="p">,</span> <span class="mf">50.0</span><span class="p">,</span> <span class="mf">1000.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">500.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">);</span>
</pre></div>
</div>
<p>Further examples of the Mokka geometry implementation can be found in the examples/features/geometry/Mokka/General directory. See the common table parameters and solid type sections below for more information on the table parameters available for use.</p>
<section id="common-table-parameters">
<h4>Common Table Parameters<a class="headerlink" href="#common-table-parameters" title="Link to this heading"></a></h4>
<p>The following is a list of table parameters that are common to all solid types, either as an optional or mandatory parameter:</p>
<ul>
<li><div class="line-block">
<div class="line">NAME</div>
<div class="line">Variable type: VARCHAR(32)</div>
<div class="line">Optional parameter</div>
<div class="line">If supplied, then the Geant4 LogicalVolume associated with the solid will be labelled with this name. The default is set to be the table’s name plus an automatically assigned volume number.</div>
</div>
</li>
<li><div class="line-block">
<div class="line">MATERIAL</div>
<div class="line">Variable type: VARCHAR(32)</div>
<div class="line">Optional parameter</div>
<div class="line">If supplied, then the volume will be created with this material type - note that the material must be given as a character string inside double quotation marks(“). The default material is set as Vacuum.</div>
</div>
</li>
<li><div class="line-block">
<div class="line">PARENTNAME</div>
<div class="line">Variable type: VARCHAR(32)</div>
<div class="line">Optional parameter</div>
<div class="line">If supplied, then the volume will be placed as a daughter volume to the object with ID equal to PARENTNAME. The default parent is set to be the Component Volume. Note that if PARENTID is set to the Component Volume, then POSZ will be defined with respect to the start of the object. Else POSZ will be defined with respect to the centre of the parent object.</div>
</div>
</li>
<li><div class="line-block">
<div class="line">INHERITSTYLE</div>
<div class="line">Variable type: VARCHAR(32)</div>
<div class="line">Optional parameter to be used with PARENTNAME.</div>
<div class="line">If set to “SUBTRACT“ then instead of placing the volume within the parent volume as an inherited object, it will be subtracted from the parent volume in a Boolean solid operation. The default for this value is set to ““ - which sets to the usual mother/daughter volume inheritance.</div>
</div>
</li>
<li><div class="line-block">
<div class="line">ALIGNIN</div>
<div class="line">Variable type: INTEGER(11)</div>
<div class="line">Optional parameter</div>
<div class="line">If set to 1 then the placement of components will be rotated and translated such that the incoming beamline will pass through the z-axis of this object. The default is set to zero.</div>
</div>
</li>
<li><div class="line-block">
<div class="line">ALIGNOUT</div>
<div class="line">Variable type: INTEGER(11)</div>
<div class="line">Optional parameter</div>
<div class="line">If set to 1 then the placement of the next beamline component will be rotated and translated such that the outgoing beamline will pass through the z-axis of this object. The default is set to zero.</div>
</div>
</li>
<li><div class="line-block">
<div class="line">SETSENSITIVE</div>
<div class="line">Variable type: INTEGER(11)</div>
<div class="line">Optional parameter</div>
<div class="line">If set to 1 then the object will be set up to register energy depositions made within it and also record the z-position at which this deposition occurs. This information will be saved in the ELoss Histogram if using ROOT output. The default is set to zero.</div>
</div>
</li>
<li><div class="line-block">
<div class="line">MAGTYPE</div>
<div class="line">Variable type: VARCHAR(32)</div>
<div class="line">Optional parameter</div>
<div class="line">If supplied, then the object will be set up to produce the appropriate magnetic field using the supplied K1 or K2 table parameter values . Three magnet types are available - “QUAD”, “SEXT” and “OCT”. The default is set to no magnet type. Note that if MAGTYPE is set to a value whilst K1/K2/K3 are not set, then no magnetic field will be implemented.</div>
</div>
</li>
<li><div class="line-block">
<div class="line">K1</div>
<div class="line">Variable type: DOUBLE(10,3)</div>
<div class="line">Optional parameter</div>
<div class="line">If set to a value other than zero, in conjunction with MAGTYPE set to “QUAD”, then a quadrupole field with this K1 value will be set up within the object. Default is set to zero.</div>
</div>
</li>
<li><div class="line-block">
<div class="line">K2</div>
<div class="line">Variable type: DOUBLE(10,3)</div>
<div class="line">Optional parameter</div>
<div class="line">If set to a value other than zero, in conjunction with MAGTYPE set to “SEXT”, then a sextupole field with this K2 value will be set up within the object. Default is set to zero.</div>
</div>
</li>
<li><div class="line-block">
<div class="line">K3</div>
<div class="line">Variable type: DOUBLE(10,3)</div>
<div class="line">Optional parameter</div>
<div class="line">If set to a value other than zero, in conjunction with MAGTYPE set to “OCT”, then a sextupole field with this K3 value will be set up within the object. Default is set to zero.</div>
</div>
</li>
<li><div class="line-block">
<div class="line">POSX, POSY, POSZ</div>
<div class="line">Variable type: DOUBLE(10,3)</div>
<div class="line">Required parameters</div>
<div class="line">They form the position in mm used to place the object in the component volume. POSX and POSY are defined with respect to the centre of the component volume and with respect to the component volume’s rotation. POSZ is defined with respect to the start of the component volume. Note that if the object is being placed inside another volume using PARENTNAME then the position will refer to the centre of the parent object.</div>
</div>
</li>
<li><div class="line-block">
<div class="line">ROTPSI, ROTTHETA, ROTPHI</div>
<div class="line">Variable type: DOUBLE(10,3)</div>
<div class="line">Optional parameters</div>
<div class="line">These are the Euler angles in radians used to rotate the object before it is placed. The default is set to zero for each angle.</div>
</div>
</li>
<li><div class="line-block">
<div class="line">RED, BLUE, GREEN</div>
<div class="line">Variable type: DOUBLE(10,3)</div>
<div class="line">Optional parameters</div>
<div class="line">They are the RGB colour components assigned to the object and should be a value between 0 and 1. The default is set to zero for each colour.</div>
</div>
</li>
<li><div class="line-block">
<div class="line">VISATT</div>
<div class="line">Variable type: VARCHAR(32)</div>
<div class="line">Optional parameter</div>
<div class="line">This is the visual state setting for the object. Setting this to “W” results in a wireframe display of the object. “S” produces a shaded solid and “I” leaves the object invisible. The default is set to be solid.</div>
</div>
</li>
<li><div class="line-block">
<div class="line">FIELDX, FIELDY, FIELDZ</div>
<div class="line">Variable type: DOUBLE(10,3)</div>
<div class="line">Optional parameters</div>
<div class="line">They can be used to apply a uniform field to any volume, with default units of Tesla. Note that if there is a solenoid field present throughout the entire element, then this uniform field will act in addition to the solenoid field.</div>
</div>
</li>
</ul>
</section>
<section id="box-solid-types">
<h4>‘Box’ Solid Types<a class="headerlink" href="#box-solid-types" title="Link to this heading"></a></h4>
<p>Append _BOX to the table name in order to make use of the G4Box solid type. The following table
parameters are specific to the box solid:</p>
<ul>
<li><div class="line-block">
<div class="line">LENGTHX, LENGTHY, LENGTHZ</div>
<div class="line">Variable type: DOUBLE(10,3)</div>
<div class="line">Required parameters</div>
<div class="line">There values will be used to specify the box’s dimensions.</div>
</div>
</li>
</ul>
</section>
<section id="trapezoid-solid-types">
<h4>’Trapezoid’ Solid Types<a class="headerlink" href="#trapezoid-solid-types" title="Link to this heading"></a></h4>
<p>Append _TRAP to the table name in order to make use of the G4Trd solid type - which is defined as a
trapezoid with the X and Y dimensions varying along z-functions. The following table parameters
are specific to the trapezoid solid:</p>
<ul>
<li><div class="line-block">
<div class="line">LENGTHXPLUS</div>
<div class="line">Variable type: DOUBLE(10,3)</div>
<div class="line">Required parameter</div>
<div class="line">This value will be used to specify the x-extent of the box’s dimensions at the surface positioned at +dz.</div>
</div>
</li>
<li><div class="line-block">
<div class="line">LENGTHXPMINUS</div>
<div class="line">Variable type: DOUBLE(10,3)</div>
<div class="line">Required parameter</div>
<div class="line">This value will be used to specify the x-extent of the box’s dimensions at the surface positioned at -dz.</div>
</div>
</li>
<li><div class="line-block">
<div class="line">LENGTHYPLUS</div>
<div class="line">Variable type: DOUBLE(10,3)</div>
<div class="line">Required parameter</div>
<div class="line">This value will be used to specify the y-extent of the box’s dimensions at the surface positioned at +dz.</div>
</div>
</li>
<li><div class="line-block">
<div class="line">LENGTHYPMINUS</div>
<div class="line">Variable type: DOUBLE(10,3)</div>
<div class="line">Required parameter</div>
<div class="line">This value will be used to specify the y-extent of the box’s dimensions at the surface positioned at -dz.</div>
</div>
</li>
<li><div class="line-block">
<div class="line">LENGTHZ</div>
<div class="line">Variable type: DOUBLE(10,3)</div>
<div class="line">Required parameter</div>
<div class="line">This value will be used to specify the z-extent of the box’s dimensions.</div>
</div>
</li>
</ul>
</section>
<section id="cone-solid-types">
<h4>’Cone’ Solid Types<a class="headerlink" href="#cone-solid-types" title="Link to this heading"></a></h4>
<p>Append _CONE to the table name in order to make use of the G4Cons solid type. The following
table parameters are specific to the cone solid:</p>
<ul>
<li><div class="line-block">
<div class="line">LENGTH</div>
<div class="line">Variable type: DOUBLE(10,3)</div>
<div class="line">Required parameter</div>
<div class="line">This value will be used to specify the z-extent of the cone’s dimensions.</div>
</div>
</li>
<li><div class="line-block">
<div class="line">RINNERSTART</div>
<div class="line">Variable type: DOUBLE(10,3)</div>
<div class="line">Optional parameter</div>
<div class="line">If set, this value will be used to specify the inner radius of the start of the cone. The default value is zero.</div>
</div>
</li>
<li><div class="line-block">
<div class="line">RINNEREND</div>
<div class="line">Variable type: DOUBLE(10,3)</div>
<div class="line">Optional parameter</div>
<div class="line">If set, this value will be used to specify the inner radius of the end of the cone. The default value is zero.</div>
</div>
</li>
<li><div class="line-block">
<div class="line">ROUTERSTART</div>
<div class="line">Variable type: DOUBLE(10,3)</div>
<div class="line">Required parameter</div>
<div class="line">This value will be used to specify the outer radius of the start of the cone.</div>
</div>
</li>
<li><div class="line-block">
<div class="line">ROUTEREND</div>
<div class="line">Variable type: DOUBLE(10,3)</div>
<div class="line">Required parameter</div>
<div class="line">This value will be used to specify the outer radius of the end of the cone.</div>
</div>
</li>
<li><div class="line-block">
<div class="line">STARTPHI</div>
<div class="line">Variable type: DOUBLE(10,3)</div>
<div class="line">Optional parameter</div>
<div class="line">If set, this value will be used to specify the starting angle of the cone. The default value is zero.</div>
</div>
</li>
<li><div class="line-block">
<div class="line">DELTAPHI</div>
<div class="line">Variable type: DOUBLE(10,3)</div>
<div class="line">Optional parameter</div>
<div class="line">If set, this value will be used to specify the delta angle of the cone. The default value is 2*pi.</div>
</div>
</li>
</ul>
</section>
<section id="torus-solid-types">
<h4>’Torus’ Solid Types<a class="headerlink" href="#torus-solid-types" title="Link to this heading"></a></h4>
<p>Append _TORUS to the table name in order to make use of the G4Torus solid type. The following table
parameters are specific to the torus solid:</p>
<ul>
<li><div class="line-block">
<div class="line">RINNER</div>
<div class="line">Variable type: DOUBLE(10,3)</div>
<div class="line">Optional parameter</div>
<div class="line">If set, this value will be used to specify the inner radius of the torus tube. The default value is zero.</div>
</div>
</li>
<li><div class="line-block">
<div class="line">ROUTER</div>
<div class="line">Variable type: DOUBLE(10,3)</div>
<div class="line">Required parameter</div>
<div class="line">This value will be used to specify the outer radius of the torus tube.</div>
</div>
</li>
<li><div class="line-block">
<div class="line">RSWEPT</div>
<div class="line">Variable type: DOUBLE(10,3)</div>
<div class="line">Required parameter</div>
<div class="line">This value will be used to specify the swept radius of the torus. It is defined as being the distance from the centre of the torus ring to the centre of the torus tube. For this reason, this value should not be set to less than ROUTER.</div>
</div>
</li>
<li><div class="line-block">
<div class="line">STARTPHI</div>
<div class="line">Variable type: DOUBLE(10,3)</div>
<div class="line">Optional parameter</div>
<div class="line">If set, this value will be used to specify the starting angle of the torus. The default value is zero.</div>
</div>
</li>
<li><div class="line-block">
<div class="line">DELTAPHI</div>
<div class="line">Variable type: DOUBLE(10,3)</div>
<div class="line">Optional parameter</div>
<div class="line">If set, this value will be used to specify the delta swept angle of the torus. The default value is 2*pi.</div>
</div>
</li>
</ul>
</section>
<section id="polycone-solid-types">
<h4>’Polycone’ Solid Types<a class="headerlink" href="#polycone-solid-types" title="Link to this heading"></a></h4>
<p>Append _POLYCONE to the table name in order to make use of the G4Polycone solid type. The following table
parameters are specific to the polycone solid:</p>
<ul>
<li><div class="line-block">
<div class="line">NZPLANES</div>
<div class="line">Variable type: INTEGER(11)</div>
<div class="line">Required parameter</div>
<div class="line">This value will be used to specify the number of z-planes to be used in the polycone. This value must be set to greater than 1.</div>
</div>
</li>
<li><div class="line-block">
<div class="line">PLANEPOS1, PLANEPOS2, …, PLANEPOSN</div>
<div class="line">Variable type: DOUBLE(10,3)</div>
<div class="line">Required parameters</div>
<div class="line">These values will be used to specify the z-position of the corresponding z-plane of the polycone. There should be as many PLANEPOS parameters set as the number of z-planes. For example, three z-planes will require that PLANEPOS1, PLANEPOS2, and PLANEPOS3 are all set up.</div>
</div>
</li>
<li><div class="line-block">
<div class="line">RINNER1, RINNER2, …, RINNERN</div>
<div class="line">Variable type: DOUBLE(10,3)</div>
<div class="line">Required parameters</div>
<div class="line">These values will be used to specify the inner radius of the corresponding z-plane of the polycone. There should be as many RINNER parameters set as the number of z-planes. For example, three z-planes will require that RINNER1, RINNER2, and RINNER3 are all set up.</div>
</div>
</li>
<li><div class="line-block">
<div class="line">ROUTER1, ROUTER2, …, ROUTERN</div>
<div class="line">Variable type: DOUBLE(10,3)</div>
<div class="line">Required parameters</div>
<div class="line">These values will be used to specify the outer radius of the corresponding z-plane of the polycone. There should be as many ROUTER parameters set as the number of z-planes. For example, 3 z-planes will require that ROUTER1, ROUTER2, and ROUTER3 are all set up.</div>
</div>
</li>
<li><div class="line-block">
<div class="line">STARTPHI</div>
<div class="line">Variable type: DOUBLE(10,3)</div>
<div class="line">Optional parameter</div>
<div class="line">If set, this value will be used to specify the starting angle of the polycone. The default value is zero.</div>
</div>
</li>
<li><div class="line-block">
<div class="line">DELTAPHI</div>
<div class="line">Variable type: DOUBLE(10,3)</div>
<div class="line">Optional parameter</div>
<div class="line">If set, this value will be used to specify the delta angle of the polycone. The default value is 2*pi.</div>
</div>
</li>
</ul>
</section>
<section id="elliptical-cone-solid-types">
<h4>’Elliptical Cone’ Solid Types<a class="headerlink" href="#elliptical-cone-solid-types" title="Link to this heading"></a></h4>
<p>Append _ELLIPTICALCONE to the table name in order to make use of the G4Ellipticalcone solid type. The
following table parameters are specific to the elliptical cone solid:</p>
<ul>
<li><div class="line-block">
<div class="line">XSEMIAXIS</div>
<div class="line">Variable type: DOUBLE(10,3)</div>
<div class="line">Required parameter</div>
<div class="line">This value will be used to specify the Semiaxis in X.</div>
</div>
</li>
<li><div class="line-block">
<div class="line">YSEMIAXIS</div>
<div class="line">Variable type: DOUBLE(10,3)</div>
<div class="line">Required parameter</div>
<div class="line">This value will be used to specify the Semiaxis in Y.</div>
</div>
</li>
<li><div class="line-block">
<div class="line">LENGTHZ</div>
<div class="line">Variable type: DOUBLE(10,3)</div>
<div class="line">Required parameter</div>
<div class="line">This value will be used to specify the height of the elliptical cone.</div>
</div>
</li>
<li><div class="line-block">
<div class="line">ZCUT</div>
<div class="line">Variable type: DOUBLE(10,3)</div>
<div class="line">Required parameter</div>
<div class="line">This value will be used to specify the upper cut plane level.</div>
</div>
</li>
</ul>
<p>Note that the above parameters are used to define an elliptical cone with the following parametric
equations (in the usual Geant4 way):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">X</span> <span class="o">=</span> <span class="n">XSEMIAXIS</span> <span class="o">*</span> <span class="p">(</span><span class="n">LENGTHZ</span> <span class="o">-</span> <span class="n">u</span><span class="p">)</span> <span class="o">/</span> <span class="n">u</span> <span class="o">*</span> <span class="n">Cos</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
<span class="n">Y</span> <span class="o">=</span> <span class="n">YSEMIAXIS</span> <span class="o">*</span> <span class="p">(</span><span class="n">LENGTHZ</span> <span class="o">-</span> <span class="n">u</span><span class="p">)</span> <span class="o">/</span> <span class="n">u</span> <span class="o">*</span> <span class="n">Sin</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
<span class="n">Z</span> <span class="o">=</span> <span class="n">u</span>
</pre></div>
</div>
<p>where v is between 0 and 2 <span class="math notranslate nohighlight">\(\pi\)</span> and u between 0 and h, respectively.</p>
</section>
</section>
<section id="creating-a-geometry-list">
<span id="mokka-list"></span><h3>Creating a geometry list<a class="headerlink" href="#creating-a-geometry-list" title="Link to this heading"></a></h3>
<p>A geometry list is a simple file consisting of a list of file names that contain geometry
descriptions. This is the file that should be passed to the GMAD file when defining the
Mokka element. An example of a geometry list containing ’boxes.sql’ and ’cones.sql’ would be:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># ’#’ symbols can be used for commenting out an entire line</span>
<span class="o">/</span><span class="n">directory</span><span class="o">/</span><span class="n">boxes</span><span class="o">.</span><span class="n">sql</span>
<span class="o">/</span><span class="n">directory</span><span class="o">/</span><span class="n">cones</span><span class="o">.</span><span class="n">sql</span>
</pre></div>
</div>
</section>
<section id="defining-a-mokka-element">
<span id="mokka-element"></span><h3>Defining a Mokka element<a class="headerlink" href="#defining-a-mokka-element" title="Link to this heading"></a></h3>
<p>The Mokka element can be defined by the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">collimator</span> <span class="p">:</span> <span class="n">element</span><span class="p">,</span> <span class="n">geometry</span><span class="o">=</span><span class="n">mokka</span><span class="p">:</span><span class="n">coll_geomlist</span><span class="o">.</span><span class="n">sql</span>
</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="model_conversion.html" class="btn btn-neutral float-left" title="Model Conversion" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="output.html" class="btn btn-neutral float-right" title="Output" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Beam Delivery Simulation (BDSIM) Copyright (c) Royal Holloway, University of London, 2001 - 2025.
      <span class="lastupdated">Last updated on Jun 13, 2025.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <!-- Theme Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-JYMKZHVZJ2"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-JYMKZHVZJ2', {
          'anonymize_ip': false,
      });
    </script> 

</body>
</html>